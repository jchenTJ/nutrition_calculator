<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src= "https://connect.calcapp.net/calcapp-iframe.js">
    </script>
  </head>
  <body>

    <h>Wow look at this isnt this so cool</h>
    <br>

    <iframe seamless
        allow="clipboard-write"
        src="https://connect.calcapp.net/?app=8hoygo"
        style="width: 500px;
               height: 600px;">
    </iframe>
    <br>
    <h3>Pie Chart</h3>
    <div class="piechart"></div>
    <button onclick="breakfast()">Breakfast Info</button>
    <button onclick="lunch()">Lunch Info</button>
    <button onclick="dinner()">Dinner Info</button>
    <button onclick="snack()">Snack Info</button>
    <p id="line1">Protien Grams: -</p>
    <p id="line2">Carbs Grams: -</p>
    <p id="line3">Fat Grams: -</p>
    <br><br><br><br>
    
    <script>
        function customRound(value){
            value = value * 10;
            value = Math.floor(value, 1);
            value = value / 10
            return value
        }
        function breakfast(){
            var cen = calcappIframe.getValue("MainPage", "BreakfastCal").then(function(value) {
                document.getElementById("line1").innerHTML = "Protien Grams: " + customRound(value * 0.3 / 4);
                document.getElementById("line2").innerHTML = "Carbs Grams: " + customRound(value * 0.4 / 4);
                document.getElementById("line3").innerHTML = "Fat Grams: " + customRound(value * 0.3 / 9);
            })
        }
        function lunch(){
            var cen = calcappIframe.getValue("MainPage", "LunchCal").then(function(value) {
                document.getElementById("line1").innerHTML = "Protien Grams: " + customRound(value * 0.3 / 4);
                document.getElementById("line2").innerHTML = "Carbs Grams: " + customRound(value * 0.4 / 4);
                document.getElementById("line3").innerHTML = "Fat Grams: " + customRound(value * 0.3 / 9);
            })
        }
        function dinner(){
            var cen = calcappIframe.getValue("MainPage", "DinnerCal").then(function(value) {
                document.getElementById("line1").innerHTML = "Protien Grams: " + customRound(value * 0.3 / 4);
                document.getElementById("line2").innerHTML = "Carbs Grams: " + customRound(value * 0.4 / 4);
                document.getElementById("line3").innerHTML = "Fat Grams: " + customRound(value * 0.3 / 9);
            })
        }
        function snack(){
            var cen = calcappIframe.getValue("MainPage", "SnackCal").then(function(value) {
                document.getElementById("line1").innerHTML = "Protien Grams: " + customRound(value * 0.3 / 4);
                document.getElementById("line2").innerHTML = "Carbs Grams: " + customRound(value * 0.4 / 4);
                document.getElementById("line3").innerHTML = "Fat Grams: " + customRound(value * 0.3 / 9);
            })
        }
    </script>
  </body>
</html>